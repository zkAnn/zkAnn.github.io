(function(t){function e(e){for(var i,a,s=e[0],c=e[1],l=e[2],h=0,_=[];h<s.length;h++)a=s[h],r[a]&&_.push(r[a][0]),r[a]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(_.length)_.shift()();return n.push.apply(n,l||[]),o()}function o(){for(var t,e=0;e<n.length;e++){for(var o=n[e],i=!0,s=1;s<o.length;s++){var c=o[s];0!==r[c]&&(i=!1)}i&&(n.splice(e--,1),t=a(a.s=o[0]))}return t}var i={},r={app:0},n=[];function a(e){if(i[e])return i[e].exports;var o=i[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=t,a.c=i,a.d=function(t,e,o){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(o,i,function(e){return t[e]}.bind(null,i));return o},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/docs/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;n.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"034f":function(t,e,o){"use strict";var i=o("64a9"),r=o.n(i);r.a},"199c":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es6_array_sort__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("55dd"),core_js_modules_es6_array_sort__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_array_sort__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("ac6a"),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_1__),E_work_metro_node_modules_babel_runtime_corejs2_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("75fc"),_components_MetroTile_vue__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("aa35"),vue_grid_layout__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("7be8"),vue_grid_layout__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(vue_grid_layout__WEBPACK_IMPORTED_MODULE_4__),BASE_LEN=65,REPO_URL="https://github.com/yuanfux/vue-metro-tile";__webpack_exports__["a"]={name:"app",components:{MetroTile:_components_MetroTile_vue__WEBPACK_IMPORTED_MODULE_3__["a"],VueGridLayout:vue_grid_layout__WEBPACK_IMPORTED_MODULE_4___default.a},data:function(){return{BASE_LEN:BASE_LEN,layout:[],weekDay:function(){var t={0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"};return t[(new Date).getDay()]}(),monthDay:function(){return(new Date).getDate()}(),rotateArray:[90,-180,90],site:null,rotateItemIndex:[]}},mounted:function(){this.getData()},methods:{add:function(){this.itemChange(!0)},remove:function(){this.itemChange(!1)},itemChange:function(t){var e={moduleid:"unit",name:"机构管理",img:"unit.png",icon:"fa fa-home",jsaction:"alert(2)",width:Math.random()<.5?4:2,height:2,"background-color":"#228b22"};if(t)this.layout=this.axisFormat([].concat(Object(E_work_metro_node_modules_babel_runtime_corejs2_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__["a"])(this.layout),[e]));else{var o=~~(Math.random()*this.layout.length);this.layout.splice(o,1)}},redirect:function(){window.open(REPO_URL,"_blank")},onmousedown:function(t){this.site={x:t.pageX,y:t.pageY}},onmouseup:function onmouseup(e,item){var x=this.site.x-e.pageX,y=this.site.y-e.pageY;if(Math.abs(x)+Math.abs(y)>10)return!1;var jsaction=item.jsaction;if(item.item){var type=e.target.dataset.type;jsaction=item.item[type]&&item.item[type].jsaction||""}jsaction&&eval(jsaction)},layoutUpdatedEvent:function(t){this.saveData(t)},getData:function(){var t=this,e=localStorage.getItem("layout");if(e)return this.layout=JSON.parse(e),this.layout.forEach(function(e,o){e.item&&t.rotateItemIndex.push(o)}),this.registerTimer(),!1;this.http.get("https://www.fastmock.site/mock/4cd04d931e195f79858f5993ff4a1c38/metro/api/metro").then(function(e){var o=t.axisFormat(e.data.rows);t.layout=o,t.registerTimer()},function(t){window.console.log("error",t)})},saveData:function(t){localStorage.setItem("layout",JSON.stringify(t))},axisFormat:function(t){var e=this,o=12,i=0,r=0,n=[],a=t.filter(function(t,o){return t.i||(t.i=~~(1e4*Math.random()+10)),t.rotateX=0,t.type=t.item&&(e.rotateItemIndex.push(o),2)||1,void 0===t.x||(n.push(t),!1)});if(n.length>0){var s=n.sort(function(t,e){return e.y-t.y}).filter(function(t){return t.y==n[0].y}).sort(function(t,e){return e.x-t.x})[0];console.log(s),i=s.y,o=12-s.x-s.width,r=s.height,window.console.log(o,i,r)}return a.map(function(t){var e=t.width;return e<=o?(t.height>r&&(r=t.height),t.x=12-o):(i+=r,t.x=0,o=12),o-=e,t.y=i,t.w=t.width,t.h=t.height,console.log(t),t}),t},setRotateX:function(t,e,o){t.rotateX+=o[this[e]%o.length],this[e]+=1},registerTimer:function(){var t=this;this.rotateItemIndex.forEach(function(e){t["rotateIndex"+e]=0,t["interval"+e]=setInterval(function(){t.setRotateX(t.layout[e],"rotateIndex"+e,t.rotateArray)},3e3)})},clearTimer:function(){var t=this;this.rotateItemIndex.forEach(function(e){clearInterval(t["interval"+e])})}},beforeDestroy:function(){this.clearTimer()}}},"56d7":function(t,e,o){"use strict";o.r(e);o("cadf"),o("551c"),o("f751"),o("097d");var i=o("2b0e"),r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("div",{staticClass:"login"},[o("button",{on:{click:t.add}},[t._v("增加item")]),o("button",{on:{click:t.remove}},[t._v("删除item")])]),t._m(0),o("div",{staticClass:"title"},[t._v("\n    Vue Metro Tile\n  ")]),o("div",{staticClass:"subtitle"},[t._v("\n    *click to animate or drag to rearrange\n  ")]),o("div",{staticClass:"grid-layout-container margin-right"},[o("grid-layout",{attrs:{layout:t.layout,"col-num":12,colWidth:t.BASE_LEN,"row-height":t.BASE_LEN,"is-draggable":!0,"is-resizable":!1,"is-mirrored":!1,"vertical-compact":!0,margin:[0,0],"use-css-transforms":!0},on:{"layout-updated":t.layoutUpdatedEvent}},t._l(t.layout,function(e){return o("grid-item",{key:e.i,attrs:{x:e.x,y:e.y,w:e.w,h:e.h,i:e.i}},[o("div",{staticClass:"container",on:{mousedown:function(e){return t.onmousedown(e)},mouseup:function(o){return t.onmouseup(o,e)}}},[o("MetroTile",{attrs:{width:e.w*t.BASE_LEN-6,height:e.h*t.BASE_LEN-6,rotateX:e.rotateX,faceStyle:{background:e["background-color"]},"data-type":e.moduleid}},[1==e.type?[o("div",{attrs:{slot:"front"},slot:"front"},[o("img",{staticClass:"icon",attrs:{src:e.img,alt:""}}),e.name?o("div",{staticClass:"tile-label"},[t._v("\n                   "+t._s(e.name)+"\n                  ")]):t._e()])]:2===e.type?[o("div",{style:{height:"100%",background:e.item[0]["background-color"]},attrs:{slot:"front","data-type":"0"},slot:"front"},[o("div",{staticClass:"tile-label"},[t._v("\n                   "+t._s(e.item[0].name)+"\n                  ")])]),o("div",{style:{height:"100%",background:e.item[1]["background-color"]},attrs:{slot:"top","data-type":"1"},slot:"top"},[o("div",{staticClass:"tile-label"},[t._v("\n                     "+t._s(e.item[1].name)+"\n                  ")])]),o("div",{style:{height:"100%",background:e.item[2]["background-color"]},attrs:{slot:"bottom","data-type":"2"},slot:"bottom"},[t._v("\n                   "+t._s(e.item[2].name)+"\n              ")])]:t._e()],2)],1)])}),1)],1)])},n=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("img",{attrs:{width:"120",height:"120",src:"https://user-images.githubusercontent.com/6414178/45662644-3a441000-bb35-11e8-8e72-e6ed618a733d.png"}})])}],a=o("199c"),s=a["a"],c=(o("034f"),o("2877")),l=Object(c["a"])(s,r,n,!1,null,null,null),u=l.exports,h=o("bc3a"),_=o.n(h);i["default"].config.productionTip=!1,i["default"].prototype.http=_.a,new i["default"]({render:function(t){return t(u)}}).$mount("#app")},"64a9":function(t,e,o){},aa35:function(t,e,o){"use strict";var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{ref:"scene",style:t.sceneStyle,on:{mousemove:function(e){return t.onMouseMove(e)},mousedown:function(e){return t.onMouseDown(e)},mouseup:function(e){return t.onMouseUp(e)},mouseleave:t.onMouseLeave,touchmove:function(e){return e.preventDefault(),t.onTouchMove(e)}}},[o("div",{style:t.boxContainerStyle},[o("div",{style:t.frontFaceStyle},[t._t("front")],2),o("div",{style:t.backFaceStyle},[t._t("back")],2),o("div",{style:t.topFaceStyle},[t._t("top")],2),o("div",{style:t.bottomFaceStyle},[t._t("bottom")],2),o("div",{style:t.rightFaceStyle},[t._t("right")],2),o("div",{style:t.leftFaceStyle},[t._t("left")],2)]),o("div",{class:{border:t.isHover&&!t.isMouseDown},style:t.glareBoundingBox},[o("div",{style:t.hoverGlareStyle}),o("div",{class:{ripple:t.isAnimating},style:t.clickGlareStyle,on:{animationend:t.resetAnimation}})])])},r=[],n=(o("8e6e"),o("ac6a"),o("456d"),o("bd86"));o("c5f6");function a(t,e){var o=Object.keys(t);return Object.getOwnPropertySymbols&&o.push.apply(o,Object.getOwnPropertySymbols(t)),e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o}function s(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?a(o,!0).forEach(function(e){Object(n["a"])(t,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):a(o).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))})}return t}var c={name:"MetroTile",props:{faceStyle:{type:Object},frontStyle:{type:Object},backStyle:{type:Object},rightStyle:{type:Object},leftStyle:{type:Object},topStyle:{type:Object},bottomStyle:{type:Object},rotateX:{type:Number,default:0},height:{type:Number,default:200},width:{type:Number,default:250},perspective:{type:Number,default:750},maxTiltX:{type:Number,default:20},maxTiltY:{type:Number,default:10},clickGlareSize:{type:Number,default:90},clickGlareOpacity:{type:Number,default:.2},hoverGlareOpacity:{type:Number,default:.3}},data:function(){return{curTiltTransform:"",clickGlareTop:0,clickGlareLeft:0,glareScale:5,hoverX:0,hoverY:0,mouseDownX:0,mouseDownY:0,isHover:!1,isMouseDown:!1,isAnimating:!1}},computed:{sceneStyle:function(){return{position:"relative",cursor:"pointer",width:"".concat(this.width,"px"),height:"".concat(this.height,"px"),perspective:"".concat(this.perspective,"px"),overflow:"hidden","background-color":"rgba(153,153,153,0.3)"}},curFaceTransform:function(){return"translateZ(-".concat(this.height/2,"px) rotateX(").concat(this.rotateX,"deg)")},boxContainerStyle:function(){return{width:"100%",height:"100%",position:"relative","transform-style":"preserve-3d",transition:"transform 0.5s",transform:"".concat(this.curTiltTransform," ").concat(this.curFaceTransform),"will-change":"transform"}},glareBoundingBox:function(){var t=Math.max(this.height/2,this.width/2),e=this.perspective?this.perspective/(this.perspective-t):1;return{width:"100%",height:"100%",top:0,left:0,position:"absolute",overflow:"hidden","transform-style":"preserve-3d",transform:"scale(".concat(1/e,", ").concat(1/e,") translateZ(").concat(t,"px"),"pointer-events":"none"}},hoverGlareStyle:function(){return{position:"absolute",width:"".concat(2*this.width,"px"),height:"".concat(2*this.height,"px"),"background-image":"radial-gradient(circle at center, rgba(255,255,255, 0.7) 0%, rgba(255,255,255,0.1) 100%)",transform:"translate(".concat(this.hoverX-this.width/2,"px, ").concat(this.hoverY-this.height/2,"px) translate(-").concat(this.width/2,"px, -").concat(this.height/2,"px)"),opacity:this.isHover?this.hoverGlareOpacity:0,"transform-style":"preserve-3d"}},clickGlareStyle:function(){var t=this.clickGlareSize*this.glareScale,e=(t-this.clickGlareSize)/2,o=this.clickGlareTop-this.clickGlareSize/2,i=this.clickGlareLeft-this.clickGlareSize/2;return{position:"absolute",width:"".concat(this.clickGlareSize,"px"),height:"".concat(this.clickGlareSize,"px"),opacity:0,"border-radius":"50%","--glare-top":"".concat(o,"px"),"--glare-left":"".concat(i,"px"),"--glare-opacity":"".concat(this.clickGlareOpacity),"--glare-scaled-size":"".concat(t,"px"),"--glare-scaled-top":"".concat(o-e,"px"),"--glare-scaled-left":"".concat(i-e,"px"),"transform-style":"preserve-3d"}},frontFaceStyle:function(){return s({},this.faceStyle,{},this.frontStyle,{position:"absolute",width:"".concat(this.width,"px"),height:"".concat(this.height,"px"),transform:"translateZ(".concat(this.height/2,"px)"),outline:"1px solid transparent"})},backFaceStyle:function(){return s({},this.faceStyle,{},this.backStyle,{position:"absolute",width:"".concat(this.width,"px"),height:"".concat(this.height,"px"),transform:"translateZ(-".concat(this.height/2,"px) rotateZ(180deg) rotateY(180deg)"),outline:"1px solid transparent"})},topFaceStyle:function(){return s({},this.faceStyle,{},this.topStyle,{position:"absolute",width:"".concat(this.width,"px"),height:"".concat(this.height,"px"),transform:"translateY(-".concat(this.height/2,"px) rotateX(90deg)"),outline:"1px solid transparent"})},bottomFaceStyle:function(){return s({},this.faceStyle,{},this.bottomStyle,{position:"absolute",width:"".concat(this.width,"px"),height:"".concat(this.height,"px"),transform:"translateY(".concat(this.height-this.height/2,"px) rotateX(-90deg)"),outline:"1px solid transparent"})},leftFaceStyle:function(){return s({},this.faceStyle,{},this.leftStyle,{position:"absolute",width:"".concat(this.height,"px"),height:"".concat(this.height,"px"),transform:"translateX(-".concat(this.height/2,"px) rotateY(-90deg)"),outline:"1px solid transparent"})},rightFaceStyle:function(){return s({},this.faceStyle,{},this.rightStyle,{position:"absolute",width:"".concat(this.height,"px"),height:"".concat(this.height,"px"),transform:"translateX(".concat(this.width-this.height/2,"px) rotateY(90deg)"),outline:"1px solid transparent"})}},methods:{getRelativePos2Scene:function(t,e){var o=this.$refs.scene.getBoundingClientRect();return{x:t-(o.left+window.scrollX),y:e-(o.top+window.scrollY)}},onMouseDown:function(t){var e=this.getRelativePos2Scene(t.pageX,t.pageY);this.mouseDownX=t.pageX,this.mouseDownY=t.pageY,this.tiltTile(e),this.clickGlare(e),this.setMouseDown(!0)},onMouseUp:function(t){this.mouseDownX===t.pageX&&this.mouseDownY===t.pageY&&this.$emit("click",t),this.recoverTile(),this.setMouseDown(!1)},onMouseMove:function(t){var e=this.getRelativePos2Scene(t.pageX,t.pageY);this.hoverGlare(e)},onMouseLeave:function(){this.recoverTile(),this.resetHover()},onTouchMove:function(t){this.$emit("touchmove",t)},tiltTile:function(t){var e=t.x/this.width,o=t.y/this.height,i=((.5-o)*this.maxTiltX).toFixed(2),r=((e-.5)*this.maxTiltY).toFixed(2);this.curTiltTransform="rotateX(".concat(i,"deg) rotateY(").concat(r,"deg)")},recoverTile:function(){this.curTiltTransform=""},resetHover:function(){this.isHover=!1},clickGlare:function(t){this.clickGlareTop=t.y,this.clickGlareLeft=t.x,this.isAnimating=!0},resetAnimation:function(){this.isAnimating=!1},hoverGlare:function(t){this.isHover=!0,this.hoverX=t.x,this.hoverY=t.y},setMouseDown:function(t){this.isMouseDown=t}}},l=c,u=(o("ccb7"),o("2877")),h=Object(u["a"])(l,i,r,!1,null,null,null);e["a"]=h.exports},bd67:function(t,e,o){},ccb7:function(t,e,o){"use strict";var i=o("bd67"),r=o.n(i);r.a}});
//# sourceMappingURL=app.0c9defcd.js.map